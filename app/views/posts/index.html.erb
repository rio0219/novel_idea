<% set_meta_tags title: "投稿一覧", description: "みんなのアイデアを見てみよう！" %>
<h1><%= t("titles.post_idea_list") %></h1>

<ul>
  <% @posts.each do |post| %>
    <li class="mb-4 p-2 border rounded flex items-center gap-2">
      <!-- ユーザーアイコン -->
      <%= image_tag post.user.display_image, class: "rounded-full w-10 h-10 object-cover border shadow-md" %>
      <!-- ユーザー名とジャンル -->
      <div>
        <%= link_to post.user.display_name, user_path(post.user), class: "font-semibold text-blue-600 hover:underline" %>
        (<%= post.genre.name %>) :
        <!-- 投稿内容を詳細ページへのリンクに -->
        <%= link_to post.content, post_path(post), style: "color: black; display: block;" %>
      </div>

      <!-- 編集・削除ボタン -->
      <% if user_signed_in? && post.user == current_user %>
        <div class="ml-auto flex gap-1">
          <%= link_to t("buttons.edit"), edit_post_path(post, from: request.path), class: "px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm" %>
          <%= link_to t("buttons.destroy"), post_path(post),
                data: { turbo_method: :delete, turbo_confirm: "削除しますか？" },
                class: "px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm" %>
        </div>
      <% end %>
    </li>
  <% end %>
</ul>
