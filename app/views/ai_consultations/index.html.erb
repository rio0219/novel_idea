<h1><%= t("titles.ai_consultation") %></h1>
<%= render "shared/error_messages", object: @ai_consultation %>
<%= form_with(model: @ai_consultation, url: ai_consultations_path, local: true) do |f| %>
  <div>
    <%= f.label :content, t("activerecord.attributes.ai.content") %><br>
    <%= f.text_area :content, rows: 4 %>
  </div>
  <div>
    <%= f.submit t("buttons.consultation"), class: "btn btn-primary" %>
  </div>
<% end %>

<% if session[:return_to].present? %>
  <%= link_to t("buttons.back"), session[:return_to], class: "btn btn-secondary" %>
<% end %>

<hr>

<h2><%= t("titles.previous_consultation") %></h2>
<% @consultations.each do |consultation| %>
  <div class="mb-4 p-2 border rounded">
    <p><strong>あなた:</strong> <%= consultation.content %></p>
    <p><strong>AI:</strong> <%= consultation.response.presence || "回答待ち..." %></p>
  </div>
<% end %>

