<div class="p-6 bg-beige-50 rounded-xl relative shadow-md">

  <%= render "shared/error_messages", object: @user %>

  <!-- プロフィールエリア -->
  <div class="flex items-start space-x-6 mb-6">

    <!-- アイコン -->
    <div>
      <%= link_to user_path(@user) do %>
        <div class="w-16 h-16 flex items-center justify-center rounded-full bg-orange-700 text-white text-xl font-bold shadow-lg border-2 border-white">
          <%= @user.initial_icon %>
        </div>
      <% end %>
    </div>

    <!-- 名前と自己紹介 -->
    <div class="flex-1">
      <h2 class="text-2xl font-bold mb-2"><%= @user.display_name %></h2>
      <p class="text-gray-700 leading-relaxed"><%= @user.bio.presence || "自己紹介はまだありません" %></p>
    </div>

    <!-- 編集ボタン-->
    <% if current_user == @user %>
      <div class="absolute top-4 right-4">
        <%= link_to t("buttons.plofile_edit"),
          edit_user_path(@user),
          class: "px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow" %>
      </div>
    <% end %>
  </div>

  <!-- 投稿一覧 -->
  <h3 class="mt-4 mb-2 text-lg font-semibold border-b pb-1"><%= t("titles.my_post_idea") %></h3>

  <ul class="space-y-3">
    <% @posts.each do |post| %>
      <li class="p-4 border rounded-xl bg-white shadow-sm flex justify-between items-center">
        <div>
          <%= truncate(post.content, length: 40) %>
        </div>
        <div class="flex space-x-2">
          <%= link_to t("buttons.edit"), edit_post_path(post, from: user_path(@user)), class: "px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm" %>
          <%= link_to t("buttons.destroy"), post_path(post),
              data: { turbo_method: :delete, turbo_confirm: "削除しますか？" },
              class: "px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm" %>
        </div>
      </li>
    <% end %>
  </ul>
</div>
