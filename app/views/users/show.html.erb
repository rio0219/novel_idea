<div class="p-6 bg-beige-50 rounded-xl relative shadow-md">

  <%= render "shared/error_messages", object: @user %>

  <!-- プロフィールエリア -->
  <div class="flex items-start space-x-6 mb-6">

    <!-- ユーザーアイコン -->
    <%= image_tag(
      @user.display_image.is_a?(String) ?
        asset_path(@user.display_image) :
        @user.display_image,
      class: "rounded-full w-10 h-10 object-cover border shadow-md"
    ) %>

    <!-- 名前と自己紹介 -->
    <div class="flex-1">
      <h2 class="text-2xl font-bold mb-2"><%= @user.display_name %></h2>
      <p class="text-gray-700 leading-relaxed"><%= @user.bio.presence || "自己紹介はまだありません" %></p>
    </div>

    <!-- 編集ボタン-->
    <% if current_user == @user %>
      <div class="absolute top-4 right-4">
        <%= link_to t("buttons.plofile_edit"),
          edit_user_path(@user),
          class: "px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 shadow" %>
      </div>
    <% end %>
  </div>

  <!-- 投稿一覧 -->
<h3 class="mt-4 mb-2 text-lg font-semibold border-b pb-1">
  <%= t("titles.my_post_idea") %>
</h3>

  <ul class="space-y-3">
    <% @posts.each do |post| %>
      <li class="p-4 border rounded-xl bg-white shadow-sm flex items-center">
        <!-- 左側：投稿内容 -->
        <div class="flex-1">
          <%= link_to truncate(post.content, length: 40), post_path(post), class: "text-gray-800 hover:underline" %>

          <!-- タグ表示 -->
          <div class="mt-1 flex flex-wrap gap-1">
            <% post.tags.each do |tag| %>
              <%= link_to posts_path(tag_id: tag.id), class: "px-2 py-1 bg-gray-200 text-gray-700 rounded text-xs hover:bg-gray-300" do %>
                #<%= tag.name %>
              <% end %>
            <% end %>
          </div>
        </div>

        <!-- 右側：編集・削除・いいね -->
        <div class="flex items-center gap-2 ml-auto">

          <% if post.user == current_user %>
            <!-- 編集ボタン -->
            <%= link_to t("buttons.edit"),
              edit_post_path(post, from: user_path(@user)),
              class: "px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm" %>

            <!-- 削除ボタン -->
            <%= link_to t("buttons.destroy"),
              post_path(post),
              data: { turbo_method: :delete, turbo_confirm: "削除しますか？" },
              class: "px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm" %>
          <% end %>
          <!-- ❤️ いいねボタン -->
          <div id="like-button-<%= post.id %>">
            <%= render "likes/like", post: post %>
          </div>
        </div>
      </li>
    <% end %>
  </ul>
</div>
